<!DOCTYPE html>
<html lang="en" xmlns="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:text="#{instrumento.editar.titulo}">Editar Instrumento</title>
  </head>
  <body>
    <h1 th:text="#{instrumento.editar.titulo}">
      Introduce los nuevos datos al instrumento
    </h1>
    <form
      action="#"
      th:action="instrumentos-guardar-cambios"
      th:object="${instrumentoEditar}"
      method="post"
      enctype="multipart/form-data"
    >
      <label for="nombre" th:text="#{instrumento.nombre}">Nombre</label>
      <input
        type="text"
        name="nombre"
        id="nombre"
        th:field="*{nombre}"
        th:value="*{nombre}"
      />
      <span
        style="color: red"
        th:if="${#fields.hasErrors('nombre')}"
        th:errors="*{nombre}"
      ></span>
      <br />

      <label for="tipo" th:text="#{instrumento.tipo}">Tipo</label>
      <select name="tipo" id="tipo" th:field="*{tipo}">
        <option value="Eléctrico">Eléctrico</option>
        <option value="Acústico">Acústico</option>
      </select>
      <span
        style="color: red"
        th:if="${#fields.hasErrors('tipo')}"
        th:errors="*{tipo}"
      ></span>
      <br />

      <label for="marca" th:text="#{instrumento.marca}">Marca</label>
      <input
        type="text"
        name="marca"
        id="marca"
        th:field="*{marca}"
        th:value="*{marca}"
      />
      <span
        style="color: red"
        th:if="${#fields.hasErrors('marca')}"
        th:errors="*{marca}"
      ></span>
      <br />

      <label for="gamma" th:text="#{instrumento.gamma}">Gamma</label>
      <select name="gamma" id="gamma" th:field="*{gamma}">
        <option value="Baja" th:text="#{instrumento.gamma.baja}">Baja</option>
        <option value="Media" th:text="#{instrumento.gamma.media}">
          Media
        </option>
        <option value="Alta" th:text="#{instrumento.gamma.alta}">Alta</option>
      </select>
      <span
        style="color: red"
        th:if="${#fields.hasErrors('gamma')}"
        th:errors="*{gamma}"
      ></span>
      <br />

      <label for="descripcion" th:text="#{instrumento.descripcion}"
        >Descripción</label
      >
      <textarea
        th:field="*{descripcion}"
        cols="20"
        rows="3"
        name="descripcion"
        id="descripcion"
        th:text="*{descripcion}"
      ></textarea>
      <span
        style="color: red"
        th:if="${#fields.hasErrors('descripcion')}"
        th:errors="*{descripcion}"
      ></span>
      <br />

      <label for="categoria" th:text="#{instrumento.categoria.editar}"
        >Elige una categoría</label
      >
      <select name="categoria" id="categoria" th:field="*{idCategoria}">
        <option
          th:each="c : ${categorias}"
          th:text="${c.nombre}"
          th:value="${c.id}"
        />
      </select>
      <span
        style="color: red"
        th:if="${#fields.hasErrors('idCategoria')}"
        th:errors="*{idCategoria}"
      ></span>
      <br />

      <div th:text="#{instrumento.foto.actual}">Foto actual del producto</div>
      <img
        th:src="@{/mostrar_imagen(id=${instrumentoEditar.id})}"
        alt="Imagen producto"
        style="max-width: 200px; max-height: 300px"
      /><br />
      <label for="foto" th:text="#{instrumento.subir.foto}"
        >Subir nueva foto:</label
      >
      <input type="file" name="foto" id="foto" th:field="*{archivoSubido}" />
      <span
        style="color: red"
        th:if="${#fields.hasErrors('archivoSubido')}"
        th:errors="*{archivoSubido}"
      ></span>
      <br />

      <label for="precio" th:text="#{instrumento.precio}">Precio</label>
      <input
        type="number"
        name="precio"
        id="precio"
        step="0.10"
        th:field="*{precio}"
        th:value="*{precio}"
      />
      <span
        style="color: red"
        th:if="${#fields.hasErrors('precio')}"
        th:errors="*{precio}"
      ></span>
      <br />
      <input
        type="hidden"
        id="imagenPortada"
        th:field="*{imagenPortada}"
        th:value="*{imagenPortada}"
      />
      <input type="hidden" id="id" th:field="*{id}" th:value="*{id}" />
      <input
        type="hidden"
        id="fechaCreacion"
        th:field="*{fechaCreacion}"
        th:value="*{fechaCreacion}"
      />
      <input
        type="submit"
        th:value="#{instrumento.editar.submit}"
        value="EDITAR INSTRUMENTO"
      />
    </form>
  </body>
</html>
